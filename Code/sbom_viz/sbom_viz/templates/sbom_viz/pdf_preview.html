<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./../../static/sbom_viz/css/styles.css">
    <title>Licenses</title>
</head>
<body>
    <script type="module" src="../../static/sbom_viz/js/licenses_pie.js"></script>
    <script type="module" src="../../static/sbom_viz/js/licenses_table.js"></script>
    <script type="module" src="../../static/sbom_viz/js/vulnerabilities_pie.js"></script>
    <script type="module" src="../../static/sbom_viz/js/vulnerabilities_table.js"></script>
    <script type="module" src="../../static/sbom_viz/js/pdfPreview.js"></script>

    <div class="header no">
        <a href="http://127.0.0.1:8000/" id="home-link">Home</a>
        <a href="http://127.0.0.1:8000/diagram" id="diagram-link" class="right">Diagram</a>
        <a href="http://127.0.0.1:8000/licenses" id="licenses-link" class="right">Licenses</a>
        <a href="http://127.0.0.1:8000/vulnerabilities" id="vulnerabilities-link" class="right">Vulnerabilities</a>
        <a href="#" id="pdf-preview-link" class="right">PDF Preview</a>
    </div>
    <div class="body-space"> <!-- Put all page content inside this div (body-space) so it will not be drawn beneath the navigation bar. -->
        <button id="print-btn" class="no">Print PDF</button>
        <div class="centered-title">PDF Preview</div>
        <div class="sep"></div>
        <div id="overview-content">
            <div><span class="bold">SBOM File: </span><span id="filename-field"></span></div>
        </div>
        <div class="sep"></div>
        <div class="licenses">
            <div class="centered-title">Licenses</div>

            <div id="licenses-loading" class="centered">Loading...</div>
    
            <div id="license-count-container hidden">
                <h2 class="centered hidden">Number of Distinct Licenses: <span id="number-distinct-licenses">  </span></h2>
            </div>
            <div class="analysis-content hidden">
                <div id="distribution-container">
                    <h2>Distribution</h2>
                    <div id="license-pie-chart-container"></div>
                </div>
                <div id="license-restrictiveness-container">
                    <h2>License Information</h1>
                    <label for="restrictivenessFilter">Filter by Restrictiveness:</label>
                    <select id="restrictivenessFilter">
                        <option value="all">All</option>
                        <option value="forbidden">Forbidden</option>
                        <option value="reciprocal">Reciprocal</option>
                        <option value="notice">Notice</option>
                        <option value="permissive">Permissive</option>                       
                        <option value="unencumbered">Unencumbered</option>
                        <option valie="unknown">Unknown</option>
                    </select>
                    
                    <div id="table-container">
                        <table id="licenseTable"></table>
                    </div>
                    <small>Link to License may not be valid.</small>
    
                </div>
    
            </div>
        </div>
        <div class="sep"></div>
        <div class="vulnerabilities">
            <div class="centered-title">Vulnerabilities</div>

        <div id="vuln-loading" class="centered">Loading...</div>

        <div id="count-container">
            <h2 class="centered hidden">Number of Affected Components: <span id="number-affected-components">  </span></h2>
        </div>

        <div class="analysis-content hidden">
            <div id="severity-container">
                <h2>CVSS Severity Counts</h2>
                <div id="severity-lines"></div>
            </div>
            <div id="distribution-container" class="distribution">
                <h2>Distribution</h2>
                <div id="pie-chart-container"></div>
            </div>
            <div>
                <h2>Top 10 Vulnerabilities by CVSS Score</h2>
                <div id="table-container">
                    <table id="vulnTable"></table>
                </div>
                <a id="vuln-documentation-link" href="http://127.0.0.1:8000/sec-info/" target="_" class="hyperlink">See raw vulnerability info</a>
            </div>

            
        </div>
        </div>
        <div class="sep"></div>
    </div>
    <script>
        async function printHTML() {
            //let originalHTML = document.body.innerHTML;
            //let newContents = document.querySelector(".body-space").innerHTML;
            //document.body.innerHTML = newContents;
            print();
            //document.body.innerHTML = originalHTML;
        }
        document.getElementById("print-btn").addEventListener("click", printHTML);
    </script>
</body>
</html>